{"ast":null,"code":"import _regeneratorRuntime from\"D:/My-proect/social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/My-proect/social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"D:/My-proect/social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:/My-proect/social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{usersAPI}from'../api/api';var ADD_POST='ADD-POST';var UPDATE_NEW_POST_TEXT='UPDATE-NEW-POST-TEXT';var SET_USER_PROFILE='SET-USER-PROFILE';var initialState={posts:[{id:1,message:'Hello my friend! Are you in the mood to study React?',likesCount:'12'},{id:2,message:'We fly',likesCount:'120'}],newPostText:'',profile:null};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:var newPost={id:5,message:state.newPostText,likesCount:'0'};return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[newPost]),newPostText:''});case UPDATE_NEW_POST_TEXT:return _objectSpread(_objectSpread({},state),{},{newPostText:action.newText});case SET_USER_PROFILE:return _objectSpread(_objectSpread({},state),{},{profile:action.profile});default:return state;}};export var addPostAC=function addPostAC(){return{type:ADD_POST};};export var changeNewTextAC=function changeNewTextAC(text){return{type:UPDATE_NEW_POST_TEXT,newText:text};};export var setUsersProfile=function setUsersProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var getUsersProfile=function getUsersProfile(userID){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:usersAPI.getProfile(userID).then(function(response){dispatch(setUsersProfile(response.data));});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export default profileReducer;","map":{"version":3,"sources":["D:/My-proect/social-network/src/redux/profile-reducer.tsx"],"names":["usersAPI","ADD_POST","UPDATE_NEW_POST_TEXT","SET_USER_PROFILE","initialState","posts","id","message","likesCount","newPostText","profile","profileReducer","state","action","type","newPost","newText","addPostAC","changeNewTextAC","text","setUsersProfile","getUsersProfile","userID","dispatch","getProfile","then","response","data"],"mappings":"4kBAEA,OAASA,QAAT,KAAyB,YAAzB,CAcA,GAAMC,CAAAA,QAAQ,CAAG,UAAjB,CACA,GAAMC,CAAAA,oBAAoB,CAAG,sBAA7B,CACA,GAAMC,CAAAA,gBAAgB,CAAG,kBAAzB,CAGA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,KAAK,CAAE,CACH,CAAEC,EAAE,CAAE,CAAN,CAASC,OAAO,CAAE,sDAAlB,CAA0EC,UAAU,CAAE,IAAtF,CADG,CAEH,CAAEF,EAAE,CAAE,CAAN,CAASC,OAAO,CAAE,QAAlB,CAA4BC,UAAU,CAAE,KAAxC,CAFG,CADU,CAKjBC,WAAW,CAAE,EALI,CAMjBC,OAAO,CAAE,IANQ,CAArB,CA8BA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAkF,IAAjFC,CAAAA,KAAiF,2DAAvDR,YAAuD,IAAzCS,CAAAA,MAAyC,2CAErG,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKb,CAAAA,QAAL,CACI,GAAMc,CAAAA,OAAkB,CAAG,CACvBT,EAAE,CAAE,CADmB,CAEvBC,OAAO,CAAEK,KAAK,CAACH,WAFQ,CAGvBD,UAAU,CAAE,GAHW,CAA3B,CAKA,sCACOI,KADP,MAEIP,KAAK,8BAAMO,KAAK,CAACP,KAAZ,GAAmBU,OAAnB,EAFT,CAGIN,WAAW,CAAE,EAHjB,GAKJ,IAAKP,CAAAA,oBAAL,CACI,sCACOU,KADP,MAEIH,WAAW,CAAEI,MAAM,CAACG,OAFxB,GAIJ,IAAKb,CAAAA,gBAAL,CACI,sCACOS,KADP,MAEIF,OAAO,CAAEG,MAAM,CAACH,OAFpB,GAIJ,QACI,MAAOE,CAAAA,KAAP,CAvBR,CAyBH,CA3BD,CA6BA,MAAO,IAAMK,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAC3B,MAAO,CACHH,IAAI,CAAEb,QADH,CAAP,CAGH,CAJM,CAKP,MAAO,IAAMiB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,IAAD,CAAkB,CAC7C,MAAO,CACHL,IAAI,CAAEZ,oBADH,CAEHc,OAAO,CAAEG,IAFN,CAAP,CAIH,CALM,CAMP,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACV,OAAD,CAAkB,CAC7C,MAAO,CACHI,IAAI,CAAEX,gBADH,CAEHO,OAAO,CAAPA,OAFG,CAAP,CAIH,CALM,CASP,MAAO,IAAMW,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,MAAD,CAAmF,CAC9G,+FAAO,iBAAOC,QAAP,kHACHvB,QAAQ,CAACwB,UAAT,CAAoBF,MAApB,EACKG,IADL,CACU,SAAAC,QAAQ,CAAI,CACfH,QAAQ,CAACH,eAAe,CAACM,QAAQ,CAACC,IAAV,CAAhB,CAAR,CACF,CAHL,EADG,sDAAP,+DAMH,CAPM,CASP,cAAehB,CAAAA,cAAf","sourcesContent":["import React from 'react';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { usersAPI } from '../api/api';\r\nimport { AppStateType } from './redux-store';\r\n\r\nexport type PostsType = {\r\n    id: number\r\n    message: string\r\n    likesCount: string\r\n};\r\nexport type InitialStateType = typeof initialState\r\n\r\ntype ActionType = ReturnType<typeof addPostAC> \r\n | ReturnType<typeof changeNewTextAC> \r\n | ReturnType<typeof setUsersProfile>\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst UPDATE_NEW_POST_TEXT = 'UPDATE-NEW-POST-TEXT';\r\nconst SET_USER_PROFILE = 'SET-USER-PROFILE'\r\n\r\n\r\nconst initialState = {\r\n    posts: [\r\n        { id: 1, message: 'Hello my friend! Are you in the mood to study React?', likesCount: '12' },\r\n        { id: 2, message: 'We fly', likesCount: '120' },\r\n    ] as Array<PostsType>,\r\n    newPostText: '',\r\n    profile: null,\r\n};\r\n\r\nexport type ProfileType = {\r\n    aboutMe: string\r\n    contacts:\r\n        {\r\n            github: string\r\n            vk: string\r\n            facebook: string\r\n            instagram: string\r\n            twitter: string\r\n            website: string\r\n            youtube: string\r\n            mainLink: string\r\n        }\r\n    fullName: string\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    photos: { small: string, large: string }\r\n    userId: number\r\n} | null\r\n\r\n\r\nconst profileReducer = (state: InitialStateType = initialState, action: ActionType): InitialStateType => {\r\n    \r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            const newPost: PostsType = {\r\n                id: 5,\r\n                message: state.newPostText,\r\n                likesCount: '0'\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n                newPostText: ''\r\n            }\r\n        case UPDATE_NEW_POST_TEXT:\r\n            return {\r\n                ...state,\r\n                newPostText: action.newText\r\n            }\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const addPostAC = () => {\r\n    return {\r\n        type: ADD_POST,\r\n    } as const\r\n};\r\nexport const changeNewTextAC = (text: string) => {\r\n    return {\r\n        type: UPDATE_NEW_POST_TEXT,\r\n        newText: text\r\n    } as const\r\n};\r\nexport const setUsersProfile = (profile: any) => {\r\n    return {\r\n        type: SET_USER_PROFILE,\r\n        profile,\r\n    } as const\r\n};\r\n\r\n\r\n\r\nexport const getUsersProfile = (userID: number): ThunkAction<Promise<void>, AppStateType, unknown, ActionType> => {\r\n    return async (dispatch) => {\r\n        usersAPI.getProfile(userID)\r\n            .then(response => {\r\n               dispatch(setUsersProfile(response.data))\r\n            })\r\n    }\r\n};\r\n\r\nexport default profileReducer"]},"metadata":{},"sourceType":"module"}