{"ast":null,"code":"import _regeneratorRuntime from\"D:/My-proect/social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/My-proect/social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"D:/My-proect/social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:/My-proect/social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{profileAPI,usersAPI}from'../api/api';var ADD_POST='ADD-POST';var SET_USER_PROFILE='SET-USER-PROFILE';var SET_STATUS='SET-STATUS';var initialState={posts:[{id:1,message:'Hello my friend! Are you in the mood to study React?',likesCount:'12'},{id:2,message:'We fly',likesCount:'120'}],newPostText:'',profile:null,status:''};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:var newPost={id:5,message:action.newPostText,likesCount:'0'};return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[newPost]),newPostText:''});case SET_USER_PROFILE:return _objectSpread(_objectSpread({},state),{},{profile:action.profile});case SET_STATUS:return _objectSpread(_objectSpread({},state),{},{status:action.status});default:return state;}};export var addPostAC=function addPostAC(newPostText){return{type:ADD_POST,newPostText:newPostText};};export var setUsersProfile=function setUsersProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var getUsersProfile=function getUsersProfile(userID){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:usersAPI.getProfile(userID).then(function(response){dispatch(setUsersProfile(response.data));});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getStatus=function getStatus(userID){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:profileAPI.getStatus(userID).then(function(response){dispatch(setStatus(response.data));});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var updateStatus=function updateStatus(status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:profileAPI.updateStatus(status).then(function(response){if(response.data.resultCode===0){dispatch(setStatus(status));}});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default profileReducer;","map":{"version":3,"sources":["D:/My-proect/social-network/src/redux/profile-reducer.tsx"],"names":["profileAPI","usersAPI","ADD_POST","SET_USER_PROFILE","SET_STATUS","initialState","posts","id","message","likesCount","newPostText","profile","status","profileReducer","state","action","type","newPost","addPostAC","setUsersProfile","setStatus","getUsersProfile","userID","dispatch","getProfile","then","response","data","getStatus","updateStatus","resultCode"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { profileAPI, usersAPI } from '../api/api';\r\nimport { AppStateType } from './redux-store';\r\n\r\nexport type PostsType = {\r\n    id: number\r\n    message: string\r\n    likesCount: string\r\n};\r\nexport type InitialStateType = typeof initialState\r\n\r\ntype ActionType = ReturnType<typeof addPostAC> \r\n | ReturnType<typeof setUsersProfile>\r\n | ReturnType<typeof setStatus>\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst SET_USER_PROFILE = 'SET-USER-PROFILE';\r\nconst SET_STATUS = 'SET-STATUS'\r\n\r\n\r\nconst initialState = {\r\n    posts: [\r\n        { id: 1, message: 'Hello my friend! Are you in the mood to study React?', likesCount: '12' },\r\n        { id: 2, message: 'We fly', likesCount: '120' },\r\n    ] as Array<PostsType>,\r\n    newPostText: '',\r\n    profile: null,\r\n    status: '',\r\n};\r\n\r\nexport type ProfileType = {\r\n    aboutMe: string\r\n    contacts:\r\n        {\r\n            github: string\r\n            vk: string\r\n            facebook: string\r\n            instagram: string\r\n            twitter: string\r\n            website: string\r\n            youtube: string\r\n            mainLink: string\r\n        }\r\n    fullName: string\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    photos: { small: string, large: string }\r\n    userId: number\r\n} | null\r\n\r\n\r\nconst profileReducer = (state: InitialStateType = initialState, action: ActionType): InitialStateType => {\r\n    \r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            const newPost: PostsType = {\r\n                id: 5,\r\n                message: action.newPostText,\r\n                likesCount: '0'\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n                newPostText: ''\r\n            }\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const addPostAC = (newPostText: string) => {\r\n    return {\r\n        type: ADD_POST,\r\n        newPostText,\r\n    } as const\r\n};\r\nexport const setUsersProfile = (profile: any) => {\r\n    return {\r\n        type: SET_USER_PROFILE,\r\n        profile,\r\n    } as const\r\n};\r\nexport const setStatus = (status: string) => {\r\n    return {\r\n        type: SET_STATUS,\r\n        status,\r\n    } as const\r\n}\r\n\r\n\r\n\r\nexport const getUsersProfile = (userID: number): ThunkAction<Promise<void>, AppStateType, unknown, ActionType> => {\r\n    return async (dispatch) => {\r\n        usersAPI.getProfile(userID)\r\n            .then(response => {\r\n               dispatch(setUsersProfile(response.data))\r\n            })\r\n    }\r\n};\r\nexport const getStatus = (userID: number): ThunkAction<Promise<void>, AppStateType, unknown, ActionType> => {\r\n    return async (dispatch) => {\r\n        profileAPI.getStatus(userID)\r\n            .then(response => {\r\n               dispatch(setStatus(response.data))\r\n            })\r\n    }\r\n};\r\nexport const updateStatus = (status: string): ThunkAction<Promise<void>, AppStateType, unknown, ActionType> => {\r\n    return async (dispatch) => {\r\n        profileAPI.updateStatus(status)\r\n            .then(response => {\r\n                if (response.data.resultCode === 0){\r\n               dispatch(setStatus(status));\r\n            }\r\n            })\r\n    }\r\n};\r\n\r\nexport default profileReducer"]},"metadata":{},"sourceType":"module"}